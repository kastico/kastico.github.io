---
import { SITE_TITLE } from '../consts';
import HeaderLink from './HeaderLink.astro';
---

<header class="header">
  <nav class="nav">
    <!-- Logo -->
    <div class="logo">
      <h2><a href="/">{SITE_TITLE}</a></h2>
    </div>

    <!-- Desktop Navigation -->
    <div class="desktop-nav">
      <div class="internal-links">
        <HeaderLink href="/">Home</HeaderLink>
        <HeaderLink href="/vaults">Vaults</HeaderLink>
        <HeaderLink href="/blog">Blog</HeaderLink>
        <HeaderLink href="/about">About</HeaderLink>
      </div>
      <div class="social-links">
        <a href="https://m.webtoo.ls/@kastico" target="_blank" class="social-link" title="Mastodon">
          <span class="sr-only">Follow Kastico on Mastodon</span>
          <svg viewBox="0 0 16 16" aria-hidden="true" width="20" height="20">
            <path
              fill="currentColor"
              d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"
            />
          </svg>
        </a>
        <a href="https://x.com/_kastico" target="_blank" class="social-link" title="Twitter">
          <span class="sr-only">Follow Kastico on Twitter</span>
          <svg viewBox="0 0 16 16" aria-hidden="true" width="20" height="20">
            <path
              fill="currentColor"
              d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"
            />
          </svg>
        </a>
        <a href="https://github.com/kastico" target="_blank" class="social-link" title="GitHub">
          <span class="sr-only">Go to Kastico GitHub</span>
          <svg viewBox="0 0 16 16" aria-hidden="true" width="20" height="20">
            <path
              fill="currentColor"
              d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"
            />
          </svg>
        </a>
      </div>
    </div>

    <!-- Mobile Hamburger Button -->
    <button class="hamburger" id="hamburger" aria-label="Toggle menu" aria-expanded="false">
      <span></span>
      <span></span>
      <span></span>
    </button>

    <!-- Mobile Navigation Overlay -->
    <div class="mobile-overlay" id="mobileOverlay"></div>

    <!-- Mobile Navigation Menu -->
    <div class="mobile-nav" id="mobileNav">
      <div class="mobile-nav-header">
        <h3>The Bunker</h3>
      </div>
      
      <div class="mobile-nav-content">
        <a href="/" class="mobile-nav-link">Home</a>
        <a href="/vaults" class="mobile-nav-link">Vaults</a>
        <a href="/blog" class="mobile-nav-link">Blog</a>
        <a href="/about" class="mobile-nav-link">About</a>
        
        <div class="mobile-social-links">
          <a href="https://m.webtoo.ls/@kastico" target="_blank" class="mobile-social-link" title="Mastodon">
            <svg viewBox="0 0 16 16" aria-hidden="true" width="24" height="24">
              <path fill="currentColor" d="M11.19 12.195c2.016-.24 3.77-1.475 3.99-2.603.348-1.778.32-4.339.32-4.339 0-3.47-2.286-4.488-2.286-4.488C12.062.238 10.083.017 8.027 0h-.05C5.92.017 3.942.238 2.79.765c0 0-2.285 1.017-2.285 4.488l-.002.662c-.004.64-.007 1.35.011 2.091.083 3.394.626 6.74 3.78 7.57 1.454.383 2.703.463 3.709.408 1.823-.1 2.847-.647 2.847-.647l-.06-1.317s-1.303.41-2.767.36c-1.45-.05-2.98-.156-3.215-1.928a3.614 3.614 0 0 1-.033-.496s1.424.346 3.228.428c1.103.05 2.137-.064 3.188-.189zm1.613-2.47H11.13v-4.08c0-.859-.364-1.295-1.091-1.295-.804 0-1.207.517-1.207 1.541v2.233H7.168V5.89c0-1.024-.403-1.541-1.207-1.541-.727 0-1.091.436-1.091 1.296v4.079H3.197V5.522c0-.859.22-1.541.66-2.046.456-.505 1.052-.764 1.793-.764.856 0 1.504.328 1.933.983L8 4.39l.417-.695c.429-.655 1.077-.983 1.934-.983.74 0 1.336.259 1.791.764.442.505.661 1.187.661 2.046v4.203z"/>
            </svg>
            Mastodon
          </a>
          <a href="https://x.com/_kastico" target="_blank" class="mobile-social-link" title="Twitter">
            <svg viewBox="0 0 16 16" aria-hidden="true" width="24" height="24">
              <path fill="currentColor" d="M5.026 15c6.038 0 9.341-5.003 9.341-9.334 0-.14 0-.282-.006-.422A6.685 6.685 0 0 0 16 3.542a6.658 6.658 0 0 1-1.889.518 3.301 3.301 0 0 0 1.447-1.817 6.533 6.533 0 0 1-2.087.793A3.286 3.286 0 0 0 7.875 6.03a9.325 9.325 0 0 1-6.767-3.429 3.289 3.289 0 0 0 1.018 4.382A3.323 3.323 0 0 1 .64 6.575v.045a3.288 3.288 0 0 0 2.632 3.218 3.203 3.203 0 0 1-.865.115 3.23 3.23 0 0 1-.614-.057 3.283 3.283 0 0 0 3.067 2.277A6.588 6.588 0 0 1 .78 13.58a6.32 6.32 0 0 1-.78-.045A9.344 9.344 0 0 0 5.026 15z"/>
            </svg>
            Twitter
          </a>
          <a href="https://github.com/kastico" target="_blank" class="mobile-social-link" title="GitHub">
            <svg viewBox="0 0 16 16" aria-hidden="true" width="24" height="24">
              <path fill="currentColor" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.012 8.012 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
            </svg>
            GitHub
          </a>
        </div>
      </div>
    </div>
  </nav>
</header>

<style>
  :root {
    --header-bg: #0d1117;
    --header-border: #21262d;
    --nav-text: #c9d1d9;
    --nav-text-hover: #8a63d2;
    --nav-bg-hover: rgba(110, 62, 187, 0.1);
    --mobile-nav-bg: #161b22;
    --mobile-nav-border: #30363d;
  }

  .header {
    background: var(--header-bg);
    border-bottom: 1px solid var(--header-border);
    position: sticky;
    top: 0;
    z-index: 1000;
    backdrop-filter: blur(8px);
  }

  .nav {
    display: flex;
    align-items: center;
    justify-content: space-between;
    max-width: 1280px;
    margin: 0 auto;
    height: 64px;
    padding: 0 1rem;
    position: relative;
  }

  /* Logo */
  .logo h2 {
    margin: 0;
    font-size: 1.25rem;
    font-weight: 600;
  }

  .logo a {
    text-decoration: none;
    color: var(--nav-text);
    transition: all 0.2s ease;
    padding: 0.5rem 0;
    display: block;
    background: linear-gradient(135deg, #8a63d2 0%, #6e3ebb 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .logo a:hover {
    text-decoration: none;
    opacity: 0.8;
  }

  /* Desktop Navigation */
  .desktop-nav {
    display: flex;
    align-items: center;
    gap: 2rem;
  }

  .internal-links {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .internal-links a {
    color: var(--nav-text);
    text-decoration: none;
    padding: 0.5rem 1rem;
    border-radius: 6px;
    font-size: 0.9rem;
    font-weight: 500;
    transition: all 0.2s ease;
    border: 1px solid transparent;
  }

  .internal-links a:hover {
    color: var(--nav-text-hover);
    background: var(--nav-bg-hover);
    border-color: rgba(110, 62, 187, 0.3);
    text-decoration: none;
    transform: translateY(-1px);
  }

  .internal-links a.active {
    color: var(--nav-text-hover);
    background: var(--nav-bg-hover);
    border-color: rgba(110, 62, 187, 0.4);
  }

  .social-links {
    display: flex;
    align-items: center;
    gap: 0.5rem;
  }

  .social-link {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0.5rem;
    border-radius: 6px;
    color: var(--nav-text);
    text-decoration: none;
    transition: all 0.2s ease;
    border: 1px solid transparent;
  }

  .social-link:hover {
    color: var(--nav-text-hover);
    background: var(--nav-bg-hover);
    border-color: rgba(110, 62, 187, 0.3);
    text-decoration: none;
    transform: translateY(-1px);
  }

  .social-link svg {
    width: 20px;
    height: 20px;
  }

 
/* ===== Melhorias no menu hamb√∫rguer ===== */
.hamburger {
  display: none;
  flex-direction: column;
  justify-content: center;
  gap: 5px;
  width: 36px;
  height: 36px;
  background: none;
  border: none;
  cursor: pointer;
  z-index: 1002;
  position: relative;
  transition: transform 0.3s ease;
}

.hamburger:hover {
  transform: scale(1.05);
}

.hamburger span {
  display: block;
  height: 3px;
  width: 100%;
  background: var(--nav-text);
  border-radius: 3px;
  transition: all 0.35s cubic-bezier(0.68, -0.55, 0.27, 1.55);
  transform-origin: center;
}

/* Estado ativo */
.hamburger.active span:nth-child(1) {
  transform: rotate(45deg) translate(6px, 6px);
}

.hamburger.active span:nth-child(2) {
  opacity: 0;
  transform: scaleX(0);
}

.hamburger.active span:nth-child(3) {
  transform: rotate(-45deg) translate(6px, -6px);
}

/* ===== Overlay com fade ===== */
.mobile-overlay {
  display: block;
  position: fixed;
  inset: 0;
  background: rgba(13, 17, 23, 0.85);
  backdrop-filter: blur(6px);
  z-index: 999;
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}

.mobile-overlay.active {
  opacity: 1;
  visibility: visible;
}

/* ===== Menu mobile melhorado ===== */
.mobile-nav {
  position: fixed;
  top: 0;
  right: -100%;
  width: 320px;
  max-width: 100%;
  height: 100vh;
  background: var(--mobile-nav-bg);
  border-left: 1px solid var(--mobile-nav-border);
  box-shadow: -4px 0 12px rgba(0, 0, 0, 0.4);
  transition: right 0.35s cubic-bezier(0.68, -0.55, 0.27, 1.55);
  z-index: 1000;
  display: flex;
  flex-direction: column;
}

.mobile-nav.active {
  right: 0;
}

/* Header do menu */
.mobile-nav-header {
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: 1.5rem;
  border-bottom: 1px solid var(--mobile-nav-border);
  background: rgba(22, 27, 34, 0.9);
  backdrop-filter: blur(6px);
}

.mobile-nav-header h3 {
  margin: 0;
  color: var(--nav-text);
  font-size: 1.1rem;
  letter-spacing: 0.5px;
}

.mobile-close {
  background: none;
  border: none;
  color: var(--nav-text);
  cursor: pointer;
  padding: 0.4rem;
  border-radius: 6px;
  transition: all 0.2s ease;
}

.mobile-close:hover {
  background: var(--nav-bg-hover);
  color: var(--nav-text-hover);
  transform: rotate(90deg);
}

/* Conte√∫do */
.mobile-nav-content {
  flex: 1;
  padding: 1rem;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  overflow-y: auto;
}

/* Links internos */
.mobile-nav-link {
  color: var(--nav-text);
  text-decoration: none;
  padding: 1rem 1.25rem;
  border-radius: 10px;
  font-weight: 500;
  transition: all 0.25s ease;
  border: 1px solid transparent;
  font-size: 1rem;
}

.mobile-nav-link:hover {
  color: var(--nav-text-hover);
  background: var(--nav-bg-hover);
  border-color: rgba(110, 62, 187, 0.3);
  text-decoration: none;
  transform: translateX(6px);
}

/* Redes sociais */
.mobile-social-links {
  margin-top: 2rem;
  padding-top: 1.5rem;
  border-top: 1px solid var(--mobile-nav-border);
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.mobile-social-link {
  display: flex;
  align-items: center;
  gap: 1rem;
  color: var(--nav-text);
  text-decoration: none;
  padding: 0.9rem 1.25rem;
  border-radius: 10px;
  transition: all 0.25s ease;
  border: 1px solid transparent;
}

.mobile-social-link:hover {
  color: var(--nav-text-hover);
  background: var(--nav-bg-hover);
  border-color: rgba(110, 62, 187, 0.3);
  text-decoration: none;
  transform: translateX(5px);
}

.mobile-social-link svg {
  width: 24px;
  height: 24px;
}

/* Mobile full-screen */
@media (max-width: 480px) {
  .mobile-nav {
    width: 100%;
    border-left: none;
    box-shadow: none;
  }
}
  /* Responsive Design */
  @media (max-width: 1024px) {
    .desktop-nav {
      gap: 1rem;
    }
    
    .internal-links {
      gap: 0.25rem;
    }
    
    .internal-links a {
      padding: 0.5rem 0.75rem;
      font-size: 0.85rem;
    }
  }

  @media (max-width: 768px) {
    .nav {
      height: 56px;
      padding: 0 0.5rem;
    }

    .desktop-nav {
      display: none;
    }

    .hamburger {
      display: flex;
    }

    .logo h2 {
      font-size: 1.1rem;
    }
  }

  @media (max-width: 480px) {
    .logo h2 {
      font-size: 1rem;
    }

  }

  .sr-only {
    border: 0;
    padding: 0;
    margin: 0;
    position: absolute !important;
    height: 1px;
    width: 1px;
    overflow: hidden;
    clip: rect(1px 1px 1px 1px);
    clip: rect(1px, 1px, 1px, 1px);
    clip-path: inset(50%);
    white-space: nowrap;
  }
</style>



<script is:inline>
  document.addEventListener('DOMContentLoaded', () => {
    const hamburger = document.getElementById('hamburger');
    const mobileNav = document.getElementById('mobileNav');
    const mobileOverlay = document.getElementById('mobileOverlay');
    const mobileLinks = document.querySelectorAll('.mobile-nav-link, .mobile-social-link');

    function toggleMenu() {
      const isActive = hamburger.classList.toggle('active');
      mobileNav.classList.toggle('active', isActive);
      mobileOverlay.classList.toggle('active', isActive);
      hamburger.setAttribute('aria-expanded', isActive ? 'true' : 'false');
      document.body.style.overflow = isActive ? 'hidden' : '';
    }

    function closeMenu() {
      hamburger.classList.remove('active');
      mobileNav.classList.remove('active');
      mobileOverlay.classList.remove('active');
      hamburger.setAttribute('aria-expanded', 'false');
      document.body.style.overflow = '';
    }

    // üü£ Hamb√∫rguer abre e fecha o menu
    hamburger.addEventListener('click', toggleMenu);

    // üü£ Fechar ao clicar fora ou em links
    mobileOverlay.addEventListener('click', closeMenu);
    mobileLinks.forEach(link => link.addEventListener('click', closeMenu));

    // üü£ Fechar com a tecla Escape
    document.addEventListener('keydown', e => e.key === 'Escape' && closeMenu());
  });

</script>

